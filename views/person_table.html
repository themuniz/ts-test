{% import "includes/macros.html" as m %}
<form class="row">
    <div class="col-md-6">
        <div class="form-group">
            <label for="search">Search</label>
            <input id="search" name="search" type="search" value="{{ metadata.searchTerm }}"
                hx-get="http://localhost:40201/person" hx-trigger="keyup changed delay:500ms" hx-target="#person-table"
                hx-include="[name='limit']" class="form-control" />
        </div>
        <div class="form-group mt-2">
            <label for="limit">Records per page</label>
            <select id="limit" name="limit" class="form-control w-25" x-model="limit"
                hx-get="http://localhost:40201/person?page=1" hx-include="[name='search']" hx-target="#person-table">
                <option value="10">10</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>
</form>
<div class="d-flex justify-content-center justify-content-md-end">
    <div>{{ m.pagination(metadata.page, metadata.reachedEnd) }}</div>
</div>
<ul class="list-group list-group-flush">
    {% for person in data %}
    <li class="list-group-item">
        <div class="row">
            <div class="col-3">
                <img src="{{ person.profile_image_url }}" alt="{{ person.first_name }} {{ person.last_name }}'s avatar"
                    class="avatar" />
            </div>
            <div class="col-9">
                <span class="fw-semibold pb-1">
                    {{ person.first_name }} {{ person.last_name }}
                </span>
                <div>
                    <a href="mailto:{{ person.email }}">{{ person.email }}</a><i
                        @click="copyToClipboard('{{ person.email }}')"
                        class="btn btn-sm btn-outline-primary ms-2 bi-clipboard"></i>
                </div>
                <div>
                    <span class="me-1">
                        {{person.emplid}}
                    </span>
                    <span @click="copyToClipboard('{{ person.emplid }}')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-clipboard" viewBox="0 0 16 16">
                            <path
                                d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                            <path
                                d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                        </svg>
                    </span>
                </div>
                <button class="btn btn-sm btn-outline-success" @click="slideOverOpen=true"
                    hx-get="http://localhost:40201/person/{{ person.emplid }}" hx-swap="outer"
                    hx-target="#details-div">Details</button>
                {% endfor %}
            </div>
        </div>
    </li>
</ul>
<div class="d-flex justify-content-center justify-content-md-end">
    <div>{{ m.pagination(metadata.page, metadata.reachedEnd) }}</div>
</div>
